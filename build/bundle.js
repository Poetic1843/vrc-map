var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function o(){return Object.create(null)}function i(t){t.forEach(n)}function s(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let l;function a(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function c(t,e,n){return t.set(n),e}const u="undefined"!=typeof window;let d=u?()=>window.performance.now():()=>Date.now(),f=u?t=>requestAnimationFrame(t):t;const g=new Set;function h(t){g.forEach((e=>{e.c(t)||(g.delete(e),e.f())})),0!==g.size&&f(h)}function p(t,e){t.appendChild(e)}function y(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function m(t){const e=w("style");return function(t,e){p(t.head||t,e)}(y(t),e),e.sheet}function v(t,e,n){t.insertBefore(e,n||null)}function $(t){t.parentNode.removeChild(t)}function w(t){return document.createElement(t)}function b(t){return document.createTextNode(t)}function x(){return b(" ")}function k(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function S(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function T(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function _(t,e){t.value=null==e?"":e}const E=new Map;let I,M=0;function j(t,e,n,o,i,s,r,l=0){const a=16.666/o;let c="{\n";for(let t=0;t<=1;t+=a){const o=e+(n-e)*s(t);c+=100*t+`%{${r(o,1-o)}}\n`}const u=c+`100% {${r(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${l}`,f=y(t),{stylesheet:g,rules:h}=E.get(f)||function(t,e){const n={stylesheet:m(e),rules:{}};return E.set(t,n),n}(f,t);h[d]||(h[d]=!0,g.insertRule(`@keyframes ${d} ${u}`,g.cssRules.length));const p=t.style.animation||"";return t.style.animation=`${p?`${p}, `:""}${d} ${o}ms linear ${i}ms 1 both`,M+=1,d}function P(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=n.length-o.length;i&&(t.style.animation=o.join(", "),M-=i,M||f((()=>{M||(E.forEach((t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}})),E.clear())})))}function A(t){I=t}function N(){if(!I)throw new Error("Function called outside component initialization");return I}function K(t){N().$$.on_mount.push(t)}function R(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const W=[],U=[],C=[],F=[],L=Promise.resolve();let O=!1;function q(){O||(O=!0,L.then(Y))}function D(t){C.push(t)}function z(t){F.push(t)}const G=new Set;let B,H=0;function Y(){const t=I;do{for(;H<W.length;){const t=W[H];H++,A(t),Z(t.$$)}for(A(null),W.length=0,H=0;U.length;)U.pop()();for(let t=0;t<C.length;t+=1){const e=C[t];G.has(e)||(G.add(e),e())}C.length=0}while(W.length);for(;F.length;)F.pop()();O=!1,G.clear(),A(t)}function Z(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(D)}}function J(t,e,n){t.dispatchEvent(function(t,e,n=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,!1,e),o}(`${e?"intro":"outro"}${n}`))}const Q=new Set;let V;function X(t,e){t&&t.i&&(Q.delete(t),t.i(e))}function tt(t,e,n,o){if(t&&t.o){if(Q.has(t))return;Q.add(t),V.c.push((()=>{Q.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}const et={duration:0};function nt(n,o,r,l){let a=o(n,r),c=l?0:1,u=null,p=null,y=null;function m(){y&&P(n,y)}function v(t,e){const n=t.b-c;return e*=Math.abs(n),{a:c,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function $(o){const{delay:s=0,duration:r=300,easing:l=e,tick:$=t,css:w}=a||et,b={start:d()+s,b:o};o||(b.group=V,V.r+=1),u||p?p=b:(w&&(m(),y=j(n,c,o,r,s,l,w)),o&&$(0,1),u=v(b,r),D((()=>J(n,o,"start"))),function(t){let e;0===g.size&&f(h),new Promise((n=>{g.add(e={c:t,f:n})}))}((t=>{if(p&&t>p.start&&(u=v(p,r),p=null,J(n,u.b,"start"),w&&(m(),y=j(n,c,u.b,u.duration,0,l,a.css))),u)if(t>=u.end)$(c=u.b,1-c),J(n,u.b,"end"),p||(u.b?m():--u.group.r||i(u.group.c)),u=null;else if(t>=u.start){const e=t-u.start;c=u.a+u.d*l(e/u.duration),$(c,1-c)}return!(!u&&!p)})))}return{run(t){s(a)?(B||(B=Promise.resolve(),B.then((()=>{B=null}))),B).then((()=>{a=a(),$(t)})):$(t)},end(){m(),u=p=null}}}function ot(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function it(t){t&&t.c()}function st(t,e,o,r){const{fragment:l,on_mount:a,on_destroy:c,after_update:u}=t.$$;l&&l.m(e,o),r||D((()=>{const e=a.map(n).filter(s);c?c.push(...e):i(e),t.$$.on_mount=[]})),u.forEach(D)}function rt(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function lt(e,n,s,r,l,a,c,u=[-1]){const d=I;A(e);const f=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:l,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:o(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};c&&c(f.root);let g=!1;if(f.ctx=s?s(e,n.props||{},((t,n,...o)=>{const i=o.length?o[0]:n;return f.ctx&&l(f.ctx[t],f.ctx[t]=i)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](i),g&&function(t,e){-1===t.$$.dirty[0]&&(W.push(t),q(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],f.update(),g=!0,i(f.before_update),f.fragment=!!r&&r(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach($)}else f.fragment&&f.fragment.c();n.intro&&X(e.$$.fragment),st(e,n.target,n.anchor,n.customElement),Y()}A(d)}class at{$destroy(){rt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ct(e){let n,o,s,r,l,a,c,u,d,f;return{c(){n=w("span"),o=b(e[1]),s=b(":"),r=x(),l=w("label"),a=w("input"),c=x(),u=w("span"),S(a,"type","checkbox"),S(a,"class","svelte-cntqh6"),S(u,"class","slider svelte-cntqh6"),S(l,"class","svelte-cntqh6")},m(t,i){v(t,n,i),p(n,o),p(n,s),v(t,r,i),v(t,l,i),p(l,a),e[5](a),a.checked=e[0],p(l,c),p(l,u),d||(f=[k(a,"click",e[4]),k(a,"change",e[6])],d=!0)},p(t,[e]){2&e&&T(o,t[1]),1&e&&(a.checked=t[0])},i:t,o:t,d(t){t&&$(n),t&&$(r),t&&$(l),e[5](null),d=!1,i(f)}}}function ut(t,e,n){let o,{label:i}=e,{value:s=!1}=e;return t.$$set=t=>{"label"in t&&n(1,i=t.label),"value"in t&&n(0,s=t.value)},[s,i,o,function(){o.click()},function(e){R.call(this,t,e)},function(t){U[t?"unshift":"push"]((()=>{o=t,n(2,o)}))},function(){s=this.checked,n(0,s)}]}class dt extends at{constructor(t){super(),lt(this,t,ut,ct,r,{label:1,value:0,click:3})}get click(){return this.$$.ctx[3]}}const ft=[];function gt(e,n=t){let o;const i=new Set;function s(t){if(r(e,t)&&(e=t,o)){const t=!ft.length;for(const t of i)t[1](),ft.push(t,e);if(t){for(let t=0;t<ft.length;t+=2)ft[t][0](ft[t+1]);ft.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(r,l=t){const a=[r,l];return i.add(a),1===i.size&&(o=n(s)||t),r(e),()=>{i.delete(a),0===i.size&&(o(),o=null)}}}}const ht=gt(!1),pt=gt(!1);function yt(t){const e=t-1;return e*e*e+1}function mt(t,{delay:e=0,duration:n=400,easing:o=yt,x:i=0,y:s=0,opacity:r=0}={}){const l=getComputedStyle(t),a=+l.opacity,c="none"===l.transform?"":l.transform,u=a*(1-r);return{delay:e,duration:n,easing:o,css:(t,e)=>`\n\t\t\ttransform: ${c} translate(${(1-t)*i}px, ${(1-t)*s}px);\n\t\t\topacity: ${a-u*e}`}}function vt(t){let e,n,o,i,s,r,l,a,c,u,d;function f(e){t[6](e)}let g={label:"Skills Mode"};function h(e){t[7](e)}void 0!==t[2]&&(g.value=t[2]),n=new dt({props:g}),U.push((()=>ot(n,"value",f))),n.$on("click",t[3]);let y={label:"Imperial Mode"};return void 0!==t[1]&&(y.value=t[1]),a=new dt({props:y}),U.push((()=>ot(a,"value",h))),a.$on("click",t[4]),{c(){e=w("div"),it(n.$$.fragment),i=x(),s=w("br"),r=w("br"),l=x(),it(a.$$.fragment),S(e,"class","settings-wrapper svelte-i2vg06")},m(t,o){v(t,e,o),st(n,e,null),p(e,i),p(e,s),p(e,r),p(e,l),st(a,e,null),d=!0},p(t,e){const i={};!o&&4&e&&(o=!0,i.value=t[2],z((()=>o=!1))),n.$set(i);const s={};!c&&2&e&&(c=!0,s.value=t[1],z((()=>c=!1))),a.$set(s)},i(t){d||(X(n.$$.fragment,t),X(a.$$.fragment,t),D((()=>{u||(u=nt(e,mt,{y:20,duration:200},!0)),u.run(1)})),d=!0)},o(t){tt(n.$$.fragment,t),tt(a.$$.fragment,t),u||(u=nt(e,mt,{y:20,duration:200},!1)),u.run(0),d=!1},d(t){t&&$(e),rt(n),rt(a),t&&u&&u.end()}}}function $t(t){let e,n,o,s,r,a,c,u,d,f=t[0]&&vt(t);return{c(){var t,i;e=w("div"),n=w("img"),s=x(),r=w("input"),a=x(),f&&f.c(),t=n.src,i=o="./media/GrayGearIcon.png",l||(l=document.createElement("a")),l.href=i,t!==l.href&&S(n,"src","./media/GrayGearIcon.png"),S(n,"alt","Toggle Settings"),S(n,"class","svelte-i2vg06"),S(r,"class","settings-button svelte-i2vg06"),S(r,"type","checkbox"),S(e,"class","settings-panel svelte-i2vg06")},m(o,i){v(o,e,i),p(e,n),p(e,s),p(e,r),r.checked=t[0],p(e,a),f&&f.m(e,null),c=!0,u||(d=k(r,"change",t[5]),u=!0)},p(t,[n]){1&n&&(r.checked=t[0]),t[0]?f?(f.p(t,n),1&n&&X(f,1)):(f=vt(t),f.c(),X(f,1),f.m(e,null)):f&&(V={r:0,c:[],p:V},tt(f,1,1,(()=>{f=null})),V.r||i(V.c),V=V.p)},i(t){c||(X(f),c=!0)},o(t){tt(f),c=!1},d(t){t&&$(e),f&&f.d(),u=!1,d()}}}function wt(t,e,n){let o,i;a(t,pt,(t=>n(1,o=t))),a(t,ht,(t=>n(2,i=t)));let s=!1;const r=()=>{c(ht,i=!i,i),u()},l=()=>{c(pt,o=!o,o),u()};function u(){localStorage.setItem("settings",`skills=${i}/imperial=${o}`)}return K((()=>{localStorage.getItem("settings")||u(),function(){const t=/skills=((?:false)|(?:true))\/imperial=((?:false)|(?:true))/,e=localStorage.getItem("settings");t.test(e)||u();const n=t.exec(e);"true"==n[1]&&r(),"true"==n[2]&&l()}()})),[s,o,i,r,l,function(){s=this.checked,n(0,s)},function(t){i=t,ht.set(i)},function(t){o=t,pt.set(o)}]}class bt extends at{constructor(t){super(),lt(this,t,wt,$t,r,{})}}function xt(e){let n,o,i,s;return{c(){n=w("button"),o=b(e[0]),S(n,"class","svelte-miff50")},m(t,r){v(t,n,r),p(n,o),i||(s=k(n,"click",e[1]),i=!0)},p(t,[e]){1&e&&T(o,t[0])},i:t,o:t,d(t){t&&$(n),i=!1,s()}}}function kt(t,e,n){let{label:o}=e;return t.$$set=t=>{"label"in t&&n(0,o=t.label)},[o,function(e){R.call(this,t,e)}]}class St extends at{constructor(t){super(),lt(this,t,kt,xt,r,{label:0})}}const Tt=713.74;class _t{constructor(t,e,n,o=1){this.toUnfinished=()=>new _t(this.r+40,this.g+40,this.b+40,this.a),this.toTransparent=()=>new _t(this.r,this.g,this.b,.1),this.toString=()=>`rgba(${this.r}, ${this.g}, ${this.b}, ${this.a})`,this.r=t,this.g=e,this.b=n,this.a=o}}const Et=new _t(255,255,0),It=new _t(255,0,0),Mt=new _t(0,0,255),jt=new _t(255,0,255),Pt="rgba(155, 155, 155, 0.5)";function At(t,e,n,o,i,s){s.beginPath(),s.arc(t,e,n,0,2*Math.PI,!1),s.fillStyle=o,o&&s.fill(),s.lineWidth=5,s.strokeStyle=i,i&&s.stroke(),s.closePath()}function Nt(t,e,n,o){o.lineWidth=1,At(t,e,13,null,n,o),At(t,e,5,n,null,o)}function Kt(t,e,n,o){const i=Tt/3,s=Tt/6;o.strokeStyle=n,o.lineCap="butt",o.lineWidth=10,o.beginPath(),o.moveTo(t+s/10,e+i/8),o.lineTo(t+s-s/10,e+i/8),o.lineTo(t+s-s/10,e+i/8*7),o.lineTo(t+s/10,e+i/8*7),o.lineTo(t+s/10,e+i/8-5),o.stroke(),o.closePath(),o.fillStyle="rgba(255, 255, 255, 0.12)",o.fillRect(t,e,s,i),o.strokeStyle="rgb(0, 0, 0)",o.lineWidth=2,o.beginPath(),o.moveTo(t+s+1,e),o.lineTo(t+s+1,e+i),o.moveTo(t-1,e),o.lineTo(t-1,e+i),o.stroke(),o.closePath()}var Rt,Wt;let Ut=!1;ht.subscribe((t=>Ut=t));class Ct{constructor(t,e,n,o){this.x=t,this.y=e,this.rotation=n,this.variation=o}moveTo(t,e){this.x=t,this.y=e}rotateTo(t){this.rotation=t}render(t){throw new Error("Unimplemented")}pointInside(t,e){throw new Error("Unimplemented")}encode(){throw new Error("Unimplemented")}static decode(t){throw new Error("Unimplemented")}static isEncode(t){throw new Error("Unimplemented")}}class Ft extends Ct{constructor(){super(...arguments),this.pointInside=(t,e)=>(t-this.x)**2+(e-this.y)**2<=25.94**2}render(t){if(Ut)switch(this.variation){case 0:t.fillStyle=Et.toString();break;case 1:t.fillStyle=Mt.toString();break;case 2:t.fillStyle=It.toString()}else switch(this.variation){case 0:t.fillStyle=Et.toString();break;case 1:t.fillStyle=It.toString();break;case 2:t.fillStyle=Mt.toString()}let e=this.rotation+14;t.strokeStyle="rgb(50, 50, 50)",t.lineWidth=3,function(t,e,n,o,i,s){const r=2*Math.PI/o,l=Math.PI+i/360*(2*Math.PI);s.beginPath();for(let i=0;i<=o;i++){const o=i*r+l;s.lineTo(t+n*Math.cos(o),e+n*Math.sin(o))}s.fill(),s.stroke(),s.closePath()}(this.x,this.y,25.94,7,e,t)}encode(){return`mogo-${this.x.toFixed(2)}-${this.y.toFixed(2)}-${this.rotation.toFixed(0)}-${this.variation}`}static decode(t){const e=this.regex.exec(t).groups;return new Ft(+e.x,+e.y,+e.rotation,+e.variation)}}Rt=Ft,Ft.regex=/mogo-(?<x>(?:\d|\.)+)-(?<y>(?:\d|\.)+)-(?<rotation>(?:\d|\.)+)-(?<variation>\d)/,Ft.isEncode=t=>Rt.regex.test(t);class Lt extends Ct{constructor(t,e){super(t,e,0,0),this.pointInside=(t,e)=>(t-this.x)**2+(e-this.y)**2<=196}render(t){t.lineWidth=2,At(this.x,this.y,6,"rgba(0, 0, 0, 0)",jt.toString(),t)}encode(){return`ring-${this.x.toFixed(2)}-${this.y.toFixed(2)}`}static decode(t){const e=this.regex.exec(t).groups;return new Lt(+e.x,+e.y)}}Wt=Lt,Lt.regex=/ring-(?<x>(?:\d|\.)+)-(?<y>(?:\d|\.)+)/,Lt.isEncode=t=>Wt.regex.test(t);const Ot=713.74,qt=gt(new Array),Dt=gt([new Ft(356.87,178.435,180,0),new Ft(356.87,356.87,0,0),new Ft(356.87,178.435*3,0,0),new Ft(178.435,Ot/12*11,270,1),new Ft(Ot/12*1,Ot/6*2,0,1),new Ft(535.305,Ot/12*1,90,2),new Ft(Ot/12*11,Ot/3*2,180,2),new Lt(356.87,29.708333333333332),new Lt(356.87,59.416666666666664),new Lt(356.87,89.125),new Lt(356.87,Ot/6),new Lt(386.2083333333333,Ot/6),new Lt(415.91666666666663,Ot/6),new Lt(445.625,Ot/6),new Lt(475.3333333333333,Ot/6),new Lt(356.87,237.66666666666666),new Lt(356.87,267.375),new Lt(356.87,297.0833333333333),new Lt(356.87,475.3333333333333),new Lt(356.87,445.625),new Lt(356.87,445.625),new Lt(356.87,415.91666666666663),new Lt(356.87,594.1666666666666),new Lt(356.87,623.875),new Lt(356.87,653.5833333333333),new Lt(356.87,683.2916666666666),new Lt(326.79166666666663,594.1666666666666),new Lt(297.0833333333333,594.1666666666666),new Lt(267.375,594.1666666666666),new Lt(237.66666666666666,594.1666666666666),new Lt(475.3333333333333,356.87),new Lt(490.1875,356.87),new Lt(475.3333333333333,341.6458333333333),new Lt(460.47916666666663,356.87),new Lt(475.3333333333333,371.35416666666663),new Lt(475.3333333333333,475.3333333333333),new Lt(490.1875,475.3333333333333),new Lt(475.3333333333333,460.47916666666663),new Lt(460.47916666666663,475.3333333333333),new Lt(475.3333333333333,490.1875),new Lt(237.66666666666666,356.87),new Lt(252.52083333333331,356.87),new Lt(222.8125,356.87),new Lt(237.66666666666666,341.6458333333333),new Lt(237.66666666666666,371.35416666666663),new Lt(237.66666666666666,237.66666666666666),new Lt(237.66666666666666,222.8125),new Lt(252.52083333333331,237.66666666666666),new Lt(237.66666666666666,252.52083333333331),new Lt(222.8125,237.66666666666666)]);function zt(t,e,n){var o;t=`slot-${t}`;let i="";e.forEach((t=>{i+=t.x.toFixed(2)+"-",i+=t.y.toFixed(2)+"-",i+=t.step.toFixed(0),i+="/"})),i+="|",n.forEach((t=>{i+=t.encode()+"/"})),window.localStorage.setItem(t,i);const s=null===(o=localStorage.getItem("all-slots-list"))||void 0===o?void 0:o.split("|");s?s.includes(t)||(s.push(t),localStorage.setItem("all-slots-list",s.join("|"))):localStorage.setItem("all-slots-list",t)}async function Gt(t){localStorage.getItem("all-slots-list")||localStorage.setItem("all-slots-list","slot-slot1");const e=window.localStorage.getItem(`slot-${t}`);let n=null==e?void 0:e.split("|");const o=new Array,i=new Array;null==e&&(n="|mogo-356.50-178.25-180-0/mogo-356.50-356.50-0-0/mogo-356.50-534.75-0-0/mogo-178.25-653.58-270-1/mogo-59.42-237.67-0-1/mogo-534.75-59.42-90-2/mogo-653.58-475.33-180-2/ring-356.50-29.71/ring-356.50-59.42/ring-356.50-89.13/ring-356.50-118.83/ring-386.21-118.83/ring-415.92-118.83/ring-445.63-118.83/ring-475.33-118.83/ring-356.50-237.67/ring-356.50-267.38/ring-356.50-297.08/ring-356.50-475.33/ring-356.50-445.63/ring-356.50-445.63/ring-356.50-415.92/ring-356.50-594.17/ring-356.50-623.88/ring-356.50-653.58/ring-356.50-683.29/ring-326.79-594.17/ring-297.08-594.17/ring-267.38-594.17/ring-237.67-594.17/ring-475.33-356.50/ring-490.19-356.50/ring-475.33-341.65/ring-460.48-356.50/ring-475.33-371.35/ring-475.33-475.33/ring-490.19-475.33/ring-475.33-460.48/ring-460.48-475.33/ring-475.33-490.19/ring-237.67-356.50/ring-252.52-356.50/ring-222.81-356.50/ring-237.67-341.65/ring-237.67-371.35/ring-237.67-237.67/ring-237.67-222.81/ring-252.52-237.67/ring-237.67-252.52/ring-222.81-237.67/".split("|"));let s=n[0].split("/"),r=n[1].split("/");""==s[s.length-1]&&s.pop(),""==r[r.length-1]&&r.pop(),s.forEach((t=>{let e=t.split("-"),n=+e[0],i=+e[1],s=+e[2];isNaN(n)||isNaN(i)||o.push({x:n,y:i,step:s})})),r.forEach((t=>{if(!t)return;let e;Lt.isEncode(t)&&(e=Lt.decode(t)),Ft.isEncode(t)&&(e=Ft.decode(t)),e&&i.push(e)})),qt.set(o),Dt.set(i)}let Bt,Ht,Yt=gt("slot1");var Zt;Dt.subscribe((t=>Bt=t)),qt.subscribe((t=>Ht=t)),function(t){t[t.Add=0]="Add",t[t.Remove=1]="Remove",t[t.Move=2]="Move"}(Zt||(Zt={}));class Jt{constructor(t,e){this.type=t,this.options=e}}function Qt(t){const e="undos"==t?Xt.pop():te.pop();if(e)switch(e.type){case Zt.Add:switch(e.options.array){case"gameobjects":("undos"==t?te:Xt).push(new Jt(Zt.Remove,{array:"gameobjects",key:e.options.key,object:Bt[e.options.key]})),Bt.splice(e.options.key,1),Dt.set(Bt);break;case"points":("undos"==t?te:Xt).push(new Jt(Zt.Remove,{array:"points",key:e.options.key,object:Ht[e.options.key]})),Ht.splice(e.options.key,1),qt.set(Ht)}break;case Zt.Remove:switch(e.options.array){case"gameobjects":("undos"==t?te:Xt).push(new Jt(Zt.Add,{array:"gameobjects",key:e.options.key})),Bt.splice(e.options.key,0,e.options.object),Dt.set(Bt);break;case"points":("undos"==t?te:Xt).push(new Jt(Zt.Add,{array:"points",key:e.options.key})),Ht.splice(e.options.key,0,e.options.object),qt.set(Ht)}break;case Zt.Move:switch(e.options.array){case"gameobjects":{("undos"==t?te:Xt).push(new Jt(Zt.Move,Object.assign(Object.assign({},e.options),{array:"gameobjects"}))),console.log(e.options.key);const n=Bt[e.options.key];console.log(n),n.x=e.options.old_x,n.y=e.options.old_y,Bt[e.options.key]=n,Dt.set(Bt);break}case"points":{("undos"==t?te:Xt).push(new Jt(Zt.Move,Object.assign(Object.assign({},e.options),{array:"points"})));const n=Ht[e.options.key];n.x=e.options.old_x,n.y=e.options.old_y,Ht[e.options.key]=n,qt.set(Ht);break}}}}function Vt(t,e){console.log("undo"),Xt.push(new Jt(t,e)),te.length=0}const Xt=new Array,te=new Array;function ee(e){let n;return{c(){n=w("canvas"),S(n,"width","863.74"),S(n,"height","713.74"),S(n,"tabindex","0"),S(n,"class","svelte-pj4gtz")},m(t,o){v(t,n,o),e[1](n)},p:t,i:t,o:t,d(t){t&&$(n),e[1](null)}}}function ne(t,e,n){let o,i,s,r,l;return a(t,Yt,(t=>n(2,o=t))),a(t,qt,(t=>n(3,i=t))),a(t,pt,(t=>n(4,s=t))),a(t,Dt,(t=>n(5,r=t))),K((()=>{const t=713.74,e=[new _t(210,10,10),new _t(210,110,10),new _t(210,210,10),new _t(10,210,10),new _t(10,210,110),new _t(10,210,210),new _t(10,110,210),new _t(10,10,210),new _t(110,10,210),new _t(210,10,210),new _t(210,10,110)];const n=document.getElementById("slots-list");l.focus();const a=t/48,u=l.getContext("2d");let d={array:"none",index:NaN,start_x:null,start_y:null},f=0,g=0,h=!1,p=0,y=0,m=!1,v=!1,$=!1,w=0;l.addEventListener("mousedown",(t=>{0==t.button&&(h=!0)})),l.addEventListener("mouseup",(e=>{if(0==e.button){if(h=!1,!v)return i.push({x:p,y:y,step:w}),void(p<t&&Vt(Zt.Add,{array:"points",key:i.length-1}));"gameobjects"==d.array&&p>t&&y<=160&&(c(Dt,r[d.index].x=d.start_x,r),c(Dt,r[d.index].y=d.start_y,r),Vt(Zt.Remove,{array:"gameobjects",key:d.index,object:r[d.index]}),r.splice(d.index,1)),"points"==d.array&&p>t&&y<=160&&(c(qt,i[d.index].x=d.start_x,i),c(qt,i[d.index].y=d.start_y,i),Vt(Zt.Remove,{array:"points",key:d.index,object:i[d.index]}),i.splice(d.index,1)),p>t||(console.log(d.array),Vt(Zt.Move,{array:d.array,key:d.index,old_x:d.start_x,old_y:d.start_y})),d={array:"none",index:NaN,start_x:null,start_y:null}}zt(o,i,r)})),l.addEventListener("contextmenu",(e=>{e.preventDefault(),p<t&&(r.push(new Lt(p,y)),Vt(Zt.Add,{array:"gameobjects",key:r.length-1})),zt(o,i,r)})),l.addEventListener("mousemove",(e=>{const n=(e.x-l.offsetLeft)/l.clientWidth*l.width,o=(e.y-l.offsetTop)/l.clientHeight*l.height;switch(p=e.ctrlKey?n:e.altKey?f%a:0+Math.round((n-(e.altKey?f%a:0))/a)*a,y=e.ctrlKey?o:e.altKey?g%a:0+Math.round((o-(e.altKey?g%a:0))/a)*a,p=p<=t||y<160?p:Math.min(p,t),e.shiftKey&&h&&"none"==d.array?(r.forEach(((t,e)=>{t.pointInside(n,o)&&(d={array:"gameobjects",index:e,start_x:t.x,start_y:t.y})})),i.forEach(((t,e)=>{(n-t.x)**2+(o-t.y)**2<=256&&(d={array:"points",index:e,start_x:t.x,start_y:t.y})}))):e.shiftKey||(d={array:"none",index:NaN,start_x:null,start_y:null}),d.array){case"gameobjects":c(Dt,r[d.index].x=p,r),c(Dt,r[d.index].y=y,r);break;case"points":c(qt,i[d.index].x=p,i),c(qt,i[d.index].y=y,i)}})),l.addEventListener("keydown",(t=>{t.ctrlKey&&"KeyZ"==t.code&&Qt("undos"),t.ctrlKey&&"KeyY"==t.code&&Qt("redos"),m=t.ctrlKey,v=t.shiftKey,$=t.altKey,/\d/.test(t.key)&&0!=+t.key?w=+t.key-1:0==+t.key&&(w=10),(m||v||$)&&t.preventDefault()})),l.addEventListener("keyup",(t=>{m=t.ctrlKey,v=t.shiftKey,$=t.altKey})),Gt(o),async function o(){var l,c,b,x,k,S,T,_,E,I,M,j,P,A,N,K,R,W,U,C,F,O,D,z,G;if(f=null!==(c=null===(l=i[i.length-1])||void 0===l?void 0:l.x)&&void 0!==c?c:0,g=null!==(x=null===(b=i[i.length-1])||void 0===b?void 0:b.y)&&void 0!==x?x:0,u.fillStyle="rgb(255, 50, 50)",u.fillRect(t,0,150,150),u.fillStyle="rgb(50, 50, 50)",u.fillRect(t,150,150,563.74),function(t,e,n){n.strokeStyle="rgb(255, 255, 255)",n.lineCap="round",n.lineWidth=5,n.beginPath(),n.moveTo(t+37.5,e+37.5),n.lineTo(t+112.5,e+37.5),n.moveTo(t+50,e+37.5),n.lineTo(t+50,e+112.5),n.moveTo(t+62.5,e+37.5),n.lineTo(t+62.5,e+112.5),n.moveTo(t+75,e+37.5),n.lineTo(t+75,e+112.5),n.moveTo(t+87.5,e+37.5),n.lineTo(t+87.5,e+112.5),n.moveTo(t+100,e+37.5),n.lineTo(t+100,e+112.5),n.moveTo(t+50,e+112.5),n.lineTo(t+100,e+112.5),n.moveTo(t+62.5,e+37.5),n.lineTo(t+62.5,e+37.5-10),n.lineTo(t+87.5,e+37.5-10),n.lineTo(t+87.5,e+37.5),n.stroke(),n.closePath()}(t,0,u),function(t){t.fillStyle="rgb(125, 125, 125)",t.lineWidth=5,t.fillRect(0,0,Tt,Tt);let e=Tt/6;t.lineWidth=3,t.strokeStyle=Pt,t.beginPath();for(let n=0;n<6;n++)t.moveTo(e*n,0),t.lineTo(e*n,Tt);for(let n=0;n<6;n++)t.moveTo(0,e*n),t.lineTo(Tt,e*n);t.stroke(),t.strokeStyle="rgb(255, 255, 255)",t.beginPath(),t.moveTo(Tt/3,0),t.lineTo(Tt/3,Tt),t.moveTo(354.87,0),t.lineTo(354.87,Tt),t.moveTo(358.87,0),t.lineTo(358.87,Tt),t.moveTo(Tt/3*2,0),t.lineTo(Tt/3*2,Tt),t.moveTo(Tt/6*4,Tt/6),t.lineTo(Tt/6*5,0),t.moveTo(Tt/6*2,Tt/6*5),t.lineTo(Tt/6*1,Tt),t.stroke(),t.closePath(),Kt(0,Tt/6*2,It.toString(),t),Kt(Tt/6*5,Tt/6*2,Mt.toString(),t)}(u),r.forEach((t=>t.render(u))),!m){u.lineWidth=1,u.strokeStyle=Pt.toString(),u.beginPath();for(let e=0;e<48;e++)u.moveTo(a*e+($?f%a:0),0),u.lineTo(a*e+($?f%a:0),t);for(let e=0;e<48;e++)u.moveTo(0,a*e+($?g%a:0)),u.lineTo(t,a*e+($?g%a:0));u.stroke(),u.closePath()}for(let t=0;t<i.length;t++){d.index==t&&"points"==d.array?Nt(i[t].x,i[t].y,e[i[t].step].toUnfinished().toString(),u):Nt(i[t].x,i[t].y,e[i[t].step].toString(),u),u.strokeStyle=d.index!=t&&d.index+1!=t||"points"!=d.array?e[i[t].step].toString():e[i[t].step].toUnfinished().toString(),u.lineWidth=3,u.beginPath(),u.moveTo(null!==(S=null===(k=i[t-1])||void 0===k?void 0:k.x)&&void 0!==S?S:i[t].x,null!==(_=null===(T=i[t-1])||void 0===T?void 0:T.y)&&void 0!==_?_:i[t].y),u.lineTo(i[t].x,i[t].y),u.stroke(),u.closePath();let n=180*Math.atan2(i[t].y-(null===(E=i[t+1])||void 0===E?void 0:E.y),i[t].x-(null===(I=i[t+1])||void 0===I?void 0:I.x))/Math.PI-180*Math.atan2((null===(M=i[t-1])||void 0===M?void 0:M.y)-(null===(j=i[t])||void 0===j?void 0:j.y),(null===(P=i[t-1])||void 0===P?void 0:P.x)-i[t].x)/Math.PI;0==t&&(n=180*Math.atan2(i[0].y-(null===(A=i[1])||void 0===A?void 0:A.y),i[0].x-(null===(N=i[1])||void 0===N?void 0:N.x))/Math.PI),isNaN(n)||u.fillText(`${Math.round(n)}°`,i[t].x+20,i[t].y+20),u.fillStyle=d.index!=t&&d.index-1!=t||"points"!=d.array?e[null!==(U=null===(W=i[t+1])||void 0===W?void 0:W.step)&&void 0!==U?U:i[t].step].toString():e[null!==(R=null===(K=i[t+1])||void 0===K?void 0:K.step)&&void 0!==R?R:i[t].step].toUnfinished().toString();const o=Math.sqrt((i[t].x-(null===(C=i[t+1])||void 0===C?void 0:C.x))**2+(i[t].y-(null===(F=i[t+1])||void 0===F?void 0:F.y))**2)/2;isNaN(o)||u.fillText(`${Math.round(100*(s?(G=o,.393701*G):o))/100}${s?"in":"cm"}`,i[t].x-(i[t].x-(null===(O=i[t+1])||void 0===O?void 0:O.x))/2,i[t].y-(i[t].y-(null===(D=i[t+1])||void 0===D?void 0:D.y))/2-20)}h&&!v&&"none"==d.array&&(u.lineWidth=3,u.strokeStyle=e[w].toUnfinished().toString(),u.beginPath(),0==i.length?u.moveTo(p,y):u.moveTo(f,g),u.lineTo(p,y),u.stroke(),u.closePath(),Nt(p,y,e[w].toUnfinished().toString(),u));const B=null===(z=localStorage.getItem("all-slots-list"))||void 0===z?void 0:z.split("|").map((t=>t.substring(5)));B&&(n.textContent="Save Slots: "+B.join(", ")),await(q(),L),setTimeout(o,0)}()})),[l,function(t){U[t?"unshift":"push"]((()=>{l=t,n(0,l)}))}]}class oe extends at{constructor(t){super(),lt(this,t,ne,ee,r,{})}}function ie(e){let n,o,s;return{c(){n=w("input"),S(n,"class","svelte-14eqe3k")},m(t,i){v(t,n,i),_(n,e[0]),o||(s=[k(n,"input",e[2]),k(n,"input",e[1])],o=!0)},p(t,[e]){1&e&&n.value!==t[0]&&_(n,t[0])},i:t,o:t,d(t){t&&$(n),o=!1,i(s)}}}function se(t,e,n){let{value:o}=e;return t.$$set=t=>{"value"in t&&n(0,o=t.value)},[o,function(e){R.call(this,t,e)},function(){o=this.value,n(0,o)}]}class re extends at{constructor(t){super(),lt(this,t,se,ie,r,{value:0})}}function le(t){let e,n,o,i,s,r,l,a,c,u,d,f,g,h,y,m,b,k;function T(e){t[3](e)}r=new St({props:{label:"Delete Save"}}),r.$on("click",t[1]),a=new St({props:{label:"Delete All Saves"}}),a.$on("click",t[2]);let _={};return void 0!==t[0]&&(_.value=t[0]),u=new re({props:_}),U.push((()=>ot(u,"value",T))),y=new oe({}),b=new bt({}),{c(){e=w("div"),e.innerHTML='<a href="https://github.com/iseau395/vrc-map" target="_blank" rel="noopener noreferrer" class="svelte-s290ti">Github Repository</a>',n=x(),o=w("div"),i=w("div"),s=w("form"),it(r.$$.fragment),l=x(),it(a.$$.fragment),c=x(),it(u.$$.fragment),f=x(),g=w("p"),h=x(),it(y.$$.fragment),m=x(),it(b.$$.fragment),S(e,"class","left-panel svelte-s290ti"),S(g,"id","slots-list"),S(o,"class","map-panel svelte-s290ti")},m(t,d){v(t,e,d),v(t,n,d),v(t,o,d),p(o,i),p(i,s),st(r,s,null),p(s,l),st(a,s,null),p(s,c),st(u,s,null),p(i,f),p(i,g),p(i,h),st(y,i,null),v(t,m,d),st(b,t,d),k=!0},p(t,[e]){const n={};!d&&1&e&&(d=!0,n.value=t[0],z((()=>d=!1))),u.$set(n)},i(t){k||(X(r.$$.fragment,t),X(a.$$.fragment,t),X(u.$$.fragment,t),X(y.$$.fragment,t),X(b.$$.fragment,t),k=!0)},o(t){tt(r.$$.fragment,t),tt(a.$$.fragment,t),tt(u.$$.fragment,t),tt(y.$$.fragment,t),tt(b.$$.fragment,t),k=!1},d(t){t&&$(e),t&&$(n),t&&$(o),rt(r),rt(a),rt(u),rt(y),t&&$(m),rt(b,t)}}}function ae(t,e,n){let o,i,s;a(t,Yt,(t=>n(0,o=t))),a(t,Dt,(t=>n(5,i=t))),a(t,qt,(t=>n(6,s=t)));let r=o;const l=Yt.subscribe((()=>{var t;(null===(t=localStorage.getItem("all-slots-list"))||void 0===t?void 0:t.split("|")).includes(r)&&zt(r,s,i),r=o,Gt(o)}));var u;return u=()=>l(),N().$$.on_destroy.push(u),[o,function(){var t,e;localStorage.removeItem(`slot-${o}`);const n=null===(t=localStorage.getItem("all-slots-list"))||void 0===t?void 0:t.split("|");n&&localStorage.setItem("all-slots-list",n.filter((t=>t!=`slot-${o}`)).join("|")),c(Yt,o=null!==(e=n[0])&&void 0!==e?e:"slot1",o),Gt(o)},function(){const t=localStorage.getItem("settings");localStorage.clear(),localStorage.setItem("settings",t),c(Yt,o="slot1",o),Gt(o)},function(t){o=t,Yt.set(o)}]}return new class extends at{constructor(t){super(),lt(this,t,ae,le,r,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
